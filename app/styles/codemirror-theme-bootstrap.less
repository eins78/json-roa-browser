// bootstrap codemirror
// see <http://codemirror.net/doc/manual.html#styling>
div.CodeMirror.cm-s-default {
  // inherit form styles
  .form-control-focus();
  &, textarea {
    &:extend(.form-control all);
  }

  // set fonts
  font-family: @font-family-monospace;
  &, pre, pre.CodeMirror-line {
    // font-weight: 600;
  }
  // make the editor resize to fit its content
  height: auto;
  padding: inherit;

  // focused state
  &.CodeMirror-focused {
    .form-control-focus-base(@input-border-focus)
  }

  // colors - syntax
  .cm-string {
    color: darken(@brand-success, (luma(@brand-success) - luma(@gray-light)));
  }
  .cm-atom, .cm-number {
    color: darken(@brand-primary, (luma(@brand-primary) - luma(@gray-light)));
  }
  .cm-property {
    color: darken(@brand-primary, (luma(@brand-primary) - luma(@gray-base)));
  }
  // colors - editor
  span.CodeMirror-nonmatchingbracket, span.CodeMirror-matchingbracket {
    font-weight: 600;
  }
  span.CodeMirror-matchingbracket {
    color: @brand-success;
  }
  span.CodeMirror-nonmatchingbracket {
    color: @brand-danger;
  }
  &.CodeMirror-focused .CodeMirror-selected {
    background-color: lighten(@input-border-focus, 24%);
  }
  & .CodeMirror-selected {
    &:extend(mark);
  }
}

// -----------------------------------------------------------------------------
// copied from bootstrap so we can add it to a class
// see <node_modules/bootstrap/less/mixins/forms.less>
.form-control-focus-base(@color: @input-border-focus) {
  @color-rgba: rgba(red(@color), green(@color), blue(@color), .6);
  border-color: @color;
  outline: 0;
  .box-shadow(~"inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px @{color-rgba}");
}
